#:import sm kivy.uix.screenmanager
ScreenManager:
    id:manager
    transition:sm.FadeTransition(duration=.0)

    MDScreen:
        radius: [25, 25, 25, 25]
        md_bg_color:83 / 225, 186 / 225, 115 / 225, 1
        MDBoxLayout:
            orientation:'vertical'
            MDLabel:
                text:'SHOPPY'
                halign:'center'
                bold:True
                size_hint:None, None
                font_style:'H2'
                size_hint:1, 5
                font_name:'images/fonts/Gill Sans Bold.otf'
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1
            MDLabel:
                text:'Welcome!'
                halign:'center'
                bold:True
                size_hint:None, None
                font_style:'H4'
                size_hint:1, 5
                font_name:'images/fonts/Gill Sans Bold.otf'
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1


    MDScreen:
        md_bg_color: 245/255, 245/255, 245/255, 1
        name:"entrance"
        FloatLayout:
            Shops:
                pos_hint:{'center_x': .25, 'center_y':.65}
                on_release:
                    app.screen_capture('food')
                MDIcon:
                    icon:"food"
                    halign:"center"
                    pos_hint:{'center_x':.5, 'center_y': .6}
                    theme_text_color: "Custom"
                    text_color: 83/225, 186/225, 115/225, 1
                MDLabel:
                    text:"FOOD"
                    bold:True
                    halign: "center"
                    font_name:'images/fonts/Gill Sans Bold.otf'
                    theme_text_color: "Custom"
                    text_color: 83/225, 186/225, 115/225, 1
                    halign:'center'
            Shops:
                pos_hint:{'center_x': .75, 'center_y':.65}
                on_release:
                    app.screen_capture('market')
                MDIcon:
                    icon:"shopping"
                    halign:"center"
                    pos_hint:{'center_x':.5, 'center_y': .6}
                    theme_text_color: "Custom"
                    text_color: 83/225, 186/225, 115/225, 1
                MDLabel:
                    text:"MARKETS"
                    bold:True
                    halign:'center'
                    font_name:'images/fonts/Gill Sans Bold.otf'
                    theme_text_color: "Custom"
                    text_color: 83/225, 186/225, 115/225, 1
                    halign:'center'

            Shops:
                pos_hint:{'center_x': .5, 'center_y':.3}
                size_hint: None, None
                size: app.size_x/2, app.size_y/8.5
                orientation:'vertical'
                on_release:
                    manager.current = 'request'
                MDIcon:
                    icon:"phone"
                    halign:"center"
                    pos_hint:{'center_x':.5, 'center_y': .6}
                    theme_text_color: "Custom"
                    text_color: 83/225, 186/225, 115/225, 1
                MDLabel:
                    text:"REQUEST!"
                    bold:True
                    halign:'center'
                    font_name:'images/fonts/Gill Sans Bold.otf'
                    theme_text_color: "Custom"
                    text_color: 83/225, 186/225, 115/225, 1
                    halign:'center'

    MDScreen:
        name:'food'
        on_enter:
            app.food_caller()
        MDBoxLayout:
            orientation: 'vertical'
            padding: dp(5), dp(5)
            MDToolbar:
                title: "Food and Drinks"
                elevation: 10
                id:tool
                left_action_items: [["chevron-left", lambda x: app.screen_leave()]]
            MDBottomNavigation:
                id:bnav
                panel_color: 1, 1, 1, 1

                MDBottomNavigationItem:
                    name: 'home'
                    text: 'Home'
                    icon: 'home-outline'

                    ScrollView:
                        id: scroll
                        MDGridLayout:
                            cols: 2
                            adaptive_height: True
                            padding: dp(10), dp(4)
                            spacing: dp(30)
                            id:front_shop

                MDBottomNavigationItem:
                    name: 'orders'
                    text: 'Orders'
                    icon: 'format-list-bulleted'

                    MDLabel:
                        text: 'Python'
                        halign: 'center'

                MDBottomNavigationItem:
                    name: 'account'
                    text: 'Profile'
                    icon: 'account-outline'
                    on_enter:
                        app.check_user()

                    MDLabel:
                        text: 'JS'
                        halign: 'center'

    MDScreen:
        name:'company'
        FloatLayout:
            MDIconButton:
                icon:'chevron-left'
                theme_text_color: "Custom"
                pos_hint:{'center_x':.1, 'center_y':.95}
                text_color: 83 / 255, 186 / 255, 155 / 255, 1
                on_press:
                    app.screen_leave()
            MDLabel:
                text:app.company_name
                pos_hint:{'center_x':.5, 'center_y':.95}
                halign:'center'
                font_style:'H6'
                bold:True
                underline: True
                font_name:'images/fonts/Gill Sans.otf'
                theme_text_color: "Custom"
                text_color: 78/255, 82/255, 84/255, 1
            AsyncImage:
                source:app.company_logo
                pos_hint:{'center_x':.5, 'center_y':.85}
                size_hint: None, None
                size: "200dp", "200dp"
            MDLabel:
                text:app.company_bio
                pos_hint:{'center_x':.5, 'center_y':.73}
                halign:'center'
                bold:True
                font_name:'images/fonts/Gill Sans.otf'
                theme_text_color: "Custom"
                text_color: 78/255, 82/255, 84/255, 1
            MDLabel:
                text:'Followers'
                pos_hint:{'center_x':.35, 'center_y':.68}
                halign:'center'
                bold:True
                font_name:'images/fonts/Gill Sans.otf'
                theme_text_color: "Custom"
                text_color: 78/255, 82/255, 84/255, 1
            MDLabel:
                text:'Following'
                pos_hint:{'center_x':.7, 'center_y':.68}
                halign:'center'
                bold:True
                font_name:'images/fonts/Gill Sans.otf'
                theme_text_color: "Custom"
                text_color: 78/255, 82/255, 84/255, 1
            MDLabel:
                text:app.company_followers
                pos_hint:{'center_x':.35, 'center_y':.63}
                halign:'center'
                bold:True
                font_name:'images/fonts/Gill Sans.otf'
                theme_text_color: "Custom"
                text_color: 78/255, 82/255, 84/255, 1
            MDLabel:
                text:app.company_following
                pos_hint:{'center_x':.7, 'center_y':.63}
                halign:'center'
                bold:True
                font_name:'images/fonts/Gill Sans.otf'
                theme_text_color: "Custom"
                text_color: 78/255, 82/255, 84/255, 1
            MDRaisedButton:
                id:follow
                text: "follow"
                pos_hint:{'center_x': .53, 'center_y': .59}
                font_size: "18sp"
                theme_text_color: "Custom"
                text_color: 1, 1, 1, .9
                font_name: "images/fonts/Gill Sans.otf"
            MDSeparator:
                height: "4dp"
                pos_hint:{'center_x': .5, 'center_y': .48}
            MDLabel:
                text:"Products"
                pos_hint:{'center_x':.5, 'center_y':.51}
                halign:'center'
                font_style:'Subtitle1'
                bold:True
                font_name:'images/fonts/Gill Sans Bold.otf'
                theme_text_color: "Custom"
                text_color: 78/255, 82/255, 84/255, 1
            ScrollView:
                size_hint_y: .5
                pos_hint:{'center_x':.5, 'center_y':.23}
                id:company_scroll
                MDGridLayout:
                    cols: 2
                    adaptive_height: True
                    padding: dp(10), dp(4)
                    spacing: dp(30)
                    id:cproducts



    MDScreen:
        name:'market'
        FloatLayout:
            Shops:
                pos_hint:{"center_x": .5, "center_y":.5}
                on_release:
                    app.spin_dialog()
                MDLabel:
                    text:"MARKETS"
                    bold:True
                    halign:'center'
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1
                    halign:'center'

    MDScreen:
        name:'request'
        FloatLayout:
            Shops:
                pos_hint:{"center_x": .5, "center_y":.5}
                MDLabel:
                    text:"REQUEST"
                    bold:True
                    halign:'center'
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1
                    halign:'center'

    MDScreen:
        name:'description'
        md_bg_color: 250/255, 255/255, 255/255, 1
        MDBoxLayout:
            orientation:'vertical'
            MDCard:
                on_release:
                    app.company_screen(app.company_phone)
                md_bg_color: 1, 1, 1, 1
                padding: "10dp"
                #spacing: "5dp"
                border_radius: 20
                border_color_a: 0
                radius: [15]
                size_hint: None, None
                size: app.size_x/1, app.size_y/9
                pos_hint:{'center_x':.5, 'center_y':.85}
                focus_behavior: False
                ripple_behavior: True
                elevation: 0.1
                MDIconButton:
                    icon:'chevron-left'
                    theme_text_color: "Custom"
                    text_color: 83 / 255, 186 / 255, 155 / 255, 1
                    on_press:
                        app.screen_leave()
                MDLabel:
                    text:app.company_name
                    halign:'center'
                    bold:True
                    font_name:'images/fonts/Gill Sans.otf'
                    theme_text_color: "Custom"
                    text_color: 78/255, 82/255, 84/255, 1
                    #font_style:"Subtitle1"
            MDCarousel:
                id:image_slide
            ScrollView:
                id: scroll
                MDBoxLayout:
                    orientation:'vertical'
                    adaptive_height: True
                    padding: dp(10), dp(4)
                    spacing: dp(30)
                    Labels:
                        text:app.t_price_comma + 'Tsh'
                        font_style:"Subtitle1"
                        halign:'center'
                        font_name:'images/fonts/Gill Sans.otf'
                        theme_text_color: "Custom"
                        #text_color: 83 / 255, 186 / 255, 155 / 255, 1
                    Labels:
                        text:app.product_name
                        font_style:"H6"
                        font_name:'images/fonts/Gill Sans.otf'
                        theme_text_color: "Custom"
                        text_color: 83 / 255, 186 / 255, 155 / 255, 1
                    MDLabel:
                        text:'DESCRIPTION'
                        height: self.texture_size[1]
                        font_style:"Subtitle1"
                        font_name:'images/fonts/Gill Sans.otf'
                        theme_text_color: "Custom"
                        text_color: 78/255, 82/255, 84/255, 1
                    MDLabel:
                        text:app.product_description
                        height: self.texture_size[1]
                        font_style:"Subtitle2"
                        font_name:'images/fonts/Gill Sans.otf'
                        theme_text_color: "Custom"
                        text_color: 78/255, 82/255, 84/255, 1
                    Shops:
                        pos_hint:{"center_x":.5, "center_y":.5}
                        size: app.size_x/2.5, app.size_y/7
                        focus_behavior: False
                        ripple_behavior: False
                        orientation:'vertical'
                        spacing: dp(10)
                        Labels:
                            text:'Quantity'
                            font_name:'images/fonts/Gill Sans.otf'
                            halign:'center'
                        MDBoxLayout:
                            spacing:dp(15)
                            MDIconButton:
                                icon:'plus'
                                theme_text_color: "Custom"
                                text_color: 78/255, 82/255, 84/255, 1
                                on_release:
                                    app.increment("plus")
                            MDLabel:
                                text:app.quantity
                                halign:"center"
                                theme_text_color: "Custom"
                                text_color: 78/255, 82/255, 84/255, 1
                                font_name:'images/fonts/Gill Sans.otf'
                                theme_text_color: "Custom"
                                height: self.texture_size[1]
                                width: self.texture_size[1]
                                text_color: 78/255, 82/255, 84/255, 1
                            MDIconButton:
                                icon:'minus'
                                theme_text_color: "Custom"
                                text_color: 78/255, 82/255, 84/255, 1
                                on_release:
                                    app.increment("minus")

                    MDDropDownItem:
                        id:drop_item_one
                        md_bg_color:83 / 225, 186 / 225, 115 / 225, 1
                        pos_hint: {'center_x': .5, 'center_y': .19}
                        text: app.location
                        on_release:
                            app.location_sheet()
                    MDRaisedButton:
                        id:buy
                        text: "Order"
                        pos_hint:{'center_x': .5, 'center_y': .19}
                        font_size: "18sp"
                        font_name: "images/fonts/Gill Sans.otf"

    MDScreen:
        name:'register'
        FloatLayout:
            orientation:'vertical'
            MDLabel:
                text:'Register Once!'
                halign:"center"
                font_style:'H4'
                pos_hint:{'center_x':.5, 'center_y':.85}
                theme_text_color: "Custom"
                text_color: 83 / 225, 186 / 225, 115 / 225, 1
                font_name:'images/fonts/Gill Sans.otf'
                height: self.texture_size[1]
                width: self.texture_size[1]
            NumberOnlyField:
                id:number
                mode: "rectangle"
                fill_color: 0, 0, 0, .4
                size_hint: .8, .1
                hint_text:"Phone number:"
                pos_hint:{'center_x':.5, 'center_y':.73}
                text_color: 0, 0, 0, 1
                font_size: dp(25)
            MDTextField:
                id:username
                mode: "rectangle"
                fill_color: 0, 0, 0, .4
                size_hint: .8, .1
                pos_hint:{'center_x':.5, 'center_y':.58}
                hint_text:"Username:"
                text_color: 0, 0, 0, 1
                font_size: dp(25)
            MDRaisedButton:
                id:b_register
                text: "Register"
                size_hint: .8, .06
                pos_hint:{'center_x':.5, 'center_y':.35}
                md_bg_color: 83 / 225, 186 / 225, 115 / 225, 1
                on_release:
                    app.validate_user(number.text, username.text)


<Shops@MDCard>:
    orientation: "vertical"
    md_bg_color: 1, 1, 1, 1
    padding: "10dp"
    #spacing: "5dp"
    border_radius: 20
    border_color_a: 0
    radius: [15]
    size_hint: None, None
    size: app.size_x/2.5, app.size_y/4.5
    focus_behavior: False
    ripple_behavior: True
    elevation: 0.1

<Labels>:
    text: "Title"
    font_name:'images/fonts/Gill Sans.otf'
    theme_text_color: "Custom"
    text_color: 78/255, 82/255, 84/255, 1
    size_hint_y: None
    height: self.texture_size[1]
    font_style:"Body1"
    bold: True

<Foods>:
    orientation: "vertical"
    md_bg_color: 1, 1, 1, 1
    padding: "10dp"
    #spacing: "5dp"
    border_radius: 20
    border_color_a: 0
    radius: [15]
    size_hint: None, None
    size: app.size_x/2.5, app.size_y/3
    focus_behavior: False
    ripple_behavior: True
    elevation: 0.1

<Spin>:
    adaptive_height: True
    spacing: dp(5)
    MDSpinner:
        size_hint: None, None
        size: dp(25), dp(25)
        pos_hint: {'center_x': .5, 'center_y': 1}
        active: True
        color: 83/225, 186/225, 115/225, 1
    MDLabel:
        text:'Loading...'
        bold:True
        font_name:'images/fonts/Gill Sans.otf'
        theme_text_color: "Custom"
        text_color:78/255, 82/255, 84/255, 1
        pos_hint: {'center_x': .5, 'center_y': 1}


<Alert>:
    orientation:'vertical'
    adaptive_height: True
    spacing: dp(5)
    MDLabel:
        text:'Connection Problem!'
        bold:True
        font_name:'images/fonts/Gill Sans.otf'
        theme_text_color: "Custom"
        text_color:78/255, 82/255, 84/255, 1
        pos_hint: {'center_x': .5, 'center_y': 1}
    MDBoxLayout:
        spacing:dp(15)
        adaptive_height: True
        MDIconButton:
            icon:'chevron-left'
        MDIconButton:
            icon:'refresh'
            on_release:
                app.refresh()